<%- include('../partials/header') %>

    <% if (typeof error !=='undefined' && error) { %>
        <section class="bg-red-100 p-4 mb-6 rounded">
            <h1 class="text-red-600 font-bold text-xl">
                <%= error %>
            </h1>
        </section>
        <% } %>
            <section class="max-w-3xl mx-auto p-6 bg-white shadow-md rounded-lg">
                <h2 class="text-2xl font-semibold mb-4">Add a New Book</h2>
                <form action="/new" method="post">
                    <div class="mb-4">
                        <label for="title" class="block text-sm font-medium text-gray-700">Book Title:</label>
                        <input type="text" name="title" id="title" required
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />

                    </div>

                    <div class="mb-4">
                        <label for="readDate" class="block text-sm font-medium text-gray-700">Date when you first read
                            it: </label>
                        <input type="date" name="readDate" id="readDate" required
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">

                    </div>

                    <div class="mb-4">
                        <label for="rating" class="block text-sm font-medium text-gray-700">Rate from 1-10:</label>
                        <input type="number" name="rating" id="rating" min="1" max="10" required
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">

                    </div>

                    <div class="mb-4">
                        <label for="summary" class="block text-sm font-medium text-gray-700">Book summary:</label>
                        <textarea name="summary" id="summary" required
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"></textarea>

                    </div>

                    <div class="mb-4">
                        <label for="author" class="block text-sm font-medium text-gray-700">Author's name:</label>
                        <input type="text" id="author" name="author" required
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">

                    </div>

                    <button class="w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                        type="submit">Add Book</button>
                </form>
            </section>

            <script>
                window.onload = () => {
                    //add event listener to prevent the default behavior
                    const ratingInput = document.querySelector('#rating');
                    ratingInput.addEventListener("keypress", (event) => {
                        event.preventDefault();
                    });
                };
                const datePicker = document.querySelector('#readDate');
                datePicker.max = new Date().toISOString().split("T")[0];
            </script>
            <%- include('../partials/footer') %>