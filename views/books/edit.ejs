<%- include('../partials/header') %>

    <% if (typeof error !=='undefined' && error) { %>
        <section class="bg-red-100 p-4 mb-6 rounded">
            <h1 class="text-red-600 font-bold text-xl">
                <%= error %>
            </h1>
        </section>
        <% } %>

            <section class="max-w-3xl mx-auto p-6 bg-white shadow-md rounded-lg">
                <h2 class="text-2xl font-semibold mb-4">Edit Book Details</h2>
                <form action="/dashboard/edit/<%=book.olid %>" method="post">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700" for="title">Book Title: <%=book.title%>
                        </label>
                        <input
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                            type="text" name="title" id="title" value="<%=book.title%>" hidden />
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700" for="author">Author:
                            <%=book.author_name%>
                        </label>
                        <input
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                            type="text" id="author" name="author" value="<%=book.author_name%>" hidden>
                    </div>


                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700" for="readDate">Date when you first read
                            it: </label>
                        <input
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                            type="date" name="readDate" id="readDate" value="<%=book.read_date%>" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700" for="rating">Rate from 1-10:</label>
                        <input
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                            type="number" name="rating" id="rating" min="1" max="10" value="<%=book.rating%>" required>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700" for="summary">Book summary:</label>
                        <textarea
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                            name="summary" id="summary" required><%= book.summary %></textarea>
                    </div>



                    <button class="w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition"
                        type="submit">Update Book</button>
                </form>
            </section>

            <script>
                window.onload = () => {
                    //add event listener to prevent the default behavior
                    const ratingInput = document.querySelector('#rating');
                    ratingInput.addEventListener("keypress", (event) => {
                        event.preventDefault();
                    });
                };
                const datePicker = document.querySelector('#readDate');
                datePicker.max = new Date().toISOString().split("T")[0];
            </script>
            <%- include('../partials/footer') %>